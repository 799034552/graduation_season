[TOC]

# 拉取用户信息

GET  /users[/{id}]  HTTP1.1

成功时：
HTTP/1.1 200 OK
Content-Type: application/json

```json
{
    "id": integer,
    "sex: integer(0为女, 1为男),
    "name": string,
    "avatar": string(url),
    "collection":[
        {
            "id": integer,
            "title": string
        },
        ......
    ](收藏的热搜列表)
}
```

失败时(例子)：

HTTP/1.1 403 Forbidden
Content-Type: application/json

`{"message" : "微信认证失败"}`

# 更新收藏的热搜列表

PUT /collection HTTP1.1
Content-Type: application/x-www-form-urlencoded

{"collection" : [1, 2, 3, ...(topic_id)]}

* 注意: 可以塞初始20话题以外的东西

成功时：
HTTP/1.1 200 OK

失败时(例子)：

HTTP/1.1 403 Forbidden
Content-Type: application/json

`{"message" : "含有不存在的topic id！"}`

# 获取热搜榜

GET  /heat/topics  HTTP1.1

成功时：
HTTP/1.1 200 OK
Content-Type: application/json

```json
[
    {
        "id": integer,
        "title": string,
    },
    ......
]
```

失败时(例子)：

HTTP/1.1 403 Forbidden
Content-Type: application/json

`{"message" : "微信认证失败"}`

# 获取热评榜

GET  /heat/comments  HTTP1.1

成功时：
HTTP/1.1 200 OK
Content-Type: application/json

```json
[
    {
        "id": integer(指热搜的id！),
        "title": string,
        "heat":{
            "id": integer(指热评发布者的id),
            "name": string,
            "avatar": string
        }
    },
    ......
]
```


# 拉取热点信息

GET  /topics/{id}  HTTP1.1

成功时：
HTTP/1.1 200 OK
Content-Type: application/json

```json
{
    "id": integer(指热搜的id！),
    "title": string,
    "creator":{
        "id": integer,
        "name": string,
        "avatar": string
    },
    "comment":[
        {
            "content":string,
            "creator":{
                "id": integer,
                "name": string,
                "avatar": string
            },
            "liked": bool,
            "likes": integer,
            "subcomment":{
                {
                    "content":string,
                    "creator":{
                        "id": integer,
                        "name": string,
                        "avatar": string
                    },
                    "liked": bool,
                    "likes": integer
                },
                ......
            }
        },
        ......
    ]
}
```

失败时(例子)：

HTTP/1.1 403 Forbidden
Content-Type: application/json

`{"message" : "该热点不存在！"}`



# 发布话题

POST  /topics  HTTP1.1
Content-Type: application/x-www-form-urlencoded

title={title}

成功时：
HTTP/1.1 200 OK

失败时(例子)：

HTTP/1.1 403 Forbidden
Content-Type: application/json

`{"message" : "已有相同话题"}`

# 发布评论

POST  /comments  HTTP1.1
Content-Type: application/x-www-form-urlencoded

content={content}&topic_id={topic_id}

成功时：
HTTP/1.1 200 OK

失败时(例子)：

HTTP/1.1 403 Forbidden
Content-Type: application/json

`{"message" : "该热点不存在！"}`

# 发布子评论（楼中楼）

POST  /subcomments  HTTP1.1
Content-Type: application/x-www-form-urlencoded

content={content}&topic_id={topic_id}&comment_id={comment_id}

成功时：
HTTP/1.1 200 OK

失败时(例子)：

HTTP/1.1 403 Forbidden
Content-Type: application/json

`{"message" : "该热点不存在！"}`

# 点赞/取消点赞

PUT /like/(topics|comments|subcomments)/{id} HTTP1.1

成功时：
HTTP/1.1 200 OK

失败时(例子)：

HTTP/1.1 403 Forbidden
Content-Type: application/json

`{"message" : "该热点不存在！"}`

# 删除热搜/评论/子评论

DELETE  /(topics|comments|subcomments)/{id}  HTTP1.1

成功时：
HTTP/1.1 200 OK

失败时(例子)：

HTTP/1.1 403 Forbidden
Content-Type: application/json

`{"message" : "你不是该热搜的创造者！"}`