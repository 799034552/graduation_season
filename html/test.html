<!DOCTYPE html>
<html>
<head>
        <title>test</title>
        <body></body>
        <script src = "../js/qrcode.min.js"></script>
</head>
<body>
                <div id="qrcode"></div>

</body>
<script>
function drawAndShareImage() {
        var wid1 = 390 * 0.4;
        var hei1 = 568 * 0.65;
        debugger
        var canvas = document.createElement("canvas"); 
        canvas.width = 390;
        canvas.height = 568;
        var context = canvas.getContext("2d");
 
        context.rect(0, 0, canvas.width, canvas.height);
        context.fillStyle = "#fff";
        context.fill();
 
        //底图
        var myImage = new Image();
        myImage.src = "images/1.jpg";    //背景图片  你自己本地的图片或者在线图片
        myImage.crossOrigin = 'Anonymous';
 
        myImage.onload = function () {
            context.drawImage(myImage, 0, 0, 390, 568);
            //可以加文字
            //context.font = "60px Courier New";
            //context.fillText("我是文字", 350, 450);
 
            //如果是已经生成的Img标签可以直接使用，如果是自定义的则用下面的方法手动设置src
            var myImage2 = new Image();
            //myImage2.src = "./1.png";   //你自己本地的图片或者在线图片
            //myImage2.crossOrigin = 'Anonymous';
            myImage2 = $('#qrcode').find('img')[0];
 
            myImage2.onload = function () {
                context.drawImage(myImage2, wid1, hei1, 100, 100);
                var base64 = canvas.toDataURL("image/jpg");  //"image/png" 这里注意一下
                var img = document.getElementById('avatar');
 
                // document.getElementById('avatar').src = base64;
                img.setAttribute('src', base64);
            }
        }
    }
 
    function getQueryString(name) {
        var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
        var r = window.location.search.substr(1).match(reg);
        if (r != null) {
            return unescape(r[2]);
        }
        return null;
    }
</script>
</html>